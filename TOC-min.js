javascript:!function(){"use strict";function n(n,t,o=0,e=0){const l=document.createElement("li"),s=(n||"").trim()||(o?"Point":"Section");if(e){l.classList.add("toc-collapse-trigger"),l.innerHTML=`<div style="width:100%;">\n<span class="toc-toggle" role="button" aria-label="Toggle section">${i}</span>\n<span class="toc-clickable-content" title="${s}">${s}</span>\n</div>`;const n=l.querySelector(".toc-toggle");n.addEventListener("click",(function(t){l.classList.contains("toc-collapsed")?(l.classList.remove("toc-collapsed"),n.innerHTML=i):(l.classList.add("toc-collapsed"),n.innerHTML=c),t.stopPropagation()})),l.querySelector(".toc-clickable-content").addEventListener("click",(function(n){t.classList.remove("toc-highlight"),t.classList.add("toc-highlight"),t.scrollIntoView({behavior:"smooth",block:"start"}),n.stopPropagation()}))}else l.innerHTML=`<div style="width:100%;">\n<span class="toc-clickable-content" title="${s}">${s}</span>\n</div>`,l.querySelector(".toc-clickable-content").addEventListener("click",(function(n){t.classList.remove("toc-highlight"),t.classList.add("toc-highlight"),t.scrollIntoView({behavior:"smooth",block:"start"}),n.stopPropagation()}));return l}function t(n){document.querySelectorAll(".toc-collapse-trigger").forEach((t=>{const o=t.querySelector(".toc-toggle");n?(t.classList.remove("toc-collapsed"),o.innerHTML=i):(t.classList.add("toc-collapsed"),o.innerHTML=c)}))}function o(){const o=document.getElementById("toc-list");if(!o)return;o.innerHTML="";const e=(r||document).querySelectorAll(".relative.group.flex.flex-col.justify-center.w-full.max-w-3xl.md\\:px-4.pb-2.gap-2.items-start"),l=(r||document).querySelectorAll("article[data-testid^='conversation-turn-']");if(0!==e.length||0!==l.length){if(e.length>0){let t=0,l=0;for(let s=0;e.length>s;s++){const a=e[s],r=document.createElement("li");r.classList.add("toc-collapse-trigger");const d=a.querySelectorAll("h3").length>0;let p="";d?(t++,p=`Response ${t}(Grok)`):(l++,p=`Turn ${l}(You)`),r.innerHTML=`\n<div style="width:100%;">\n<span class="toc-toggle" role="button" aria-label="Toggle turn">${i}</span>\n<span class="toc-clickable-content" title="${p}">${p}</span>\n</div>\n `;const u=r.querySelector(".toc-toggle");if(u.addEventListener("click",(function(n){r.classList.contains("toc-collapsed")?(r.classList.remove("toc-collapsed"),u.innerHTML=i):(r.classList.add("toc-collapsed"),u.innerHTML=c),n.stopPropagation()})),r.querySelector(".toc-clickable-content").addEventListener("click",(function(n){a.scrollIntoView({behavior:"smooth",block:"start"}),n.stopPropagation()})),d){const t=document.createElement("ul"),o=a.querySelectorAll("h3");for(let e=0;o.length>e;e++){const l=o[e];let c=0,i=l;for(;i;){if("PRE"===i.tagName||"CODE"===i.tagName){c=1;break}i=i.parentElement}if(c)continue;const s=n(l.textContent,l,0,1),a=document.createElement("ul");let r=l.nextElementSibling,d=0,p=null,u=null;for(;r&&"H3"!==r.tagName;){if("H4"===r.tagName)p=r,u=n(r.textContent,r,1,1),a.appendChild(u),d=1;else if("OL"===r.tagName&&u){const t=document.createElement("ul"),o=r.querySelectorAll("li");for(let e=0;o.length>e;e++){const l=o[e],c=l.querySelector("strong");if(c){const o=n(c.textContent,l,1);t.appendChild(o)}}t.children.length>0&&u.appendChild(t)}else if("P"===r.tagName&&!p){const t=r.querySelectorAll("strong");if(t.length>0){const o=n(t[0].textContent,r,1);a.appendChild(o),d=1}}r=r.nextElementSibling}d&&s.appendChild(a),t.appendChild(s)}t.children.length>0&&r.appendChild(t)}o.appendChild(r)}}else if(l.length>0)for(let t=0;l.length>t;t++){const e=l[t],s=document.createElement("li");s.classList.add("toc-collapse-trigger");const a=e.querySelector("h6.sr-only");let r=0,d="";a&&a.textContent.indexOf("ChatGPT said:")>=0?(r=1,d=`Turn ${t+1}(AI)`):d=`Turn ${t+1}(You)`,s.innerHTML=`\n<div style="width:100%;">\n<span class="toc-toggle" role="button" aria-label="Toggle turn">${i}</span>\n<span class="toc-clickable-content" title="${d}">${d}</span>\n</div>\n `;const p=s.querySelector(".toc-toggle");if(p.addEventListener("click",(function(n){s.classList.contains("toc-collapsed")?(s.classList.remove("toc-collapsed"),p.innerHTML=i):(s.classList.add("toc-collapsed"),p.innerHTML=c),n.stopPropagation()})),s.querySelector(".toc-clickable-content").addEventListener("click",(function(n){e.scrollIntoView({behavior:"smooth",block:"start"}),n.stopPropagation()})),r){const t=document.createElement("ul"),o=e.querySelectorAll("h3:not(.sr-only)");for(let e=0;o.length>e;e++){const l=o[e];let c=0,i=l;for(;i;){if("PRE"===i.tagName||"CODE"===i.tagName){c=1;break}i=i.parentElement}if(c)continue;const s=n(l.textContent,l,0,1);t.appendChild(s)}t.children.length>0&&s.appendChild(t)}o.appendChild(s)}document.getElementById("toc-expand-all").addEventListener("click",(function(n){t(1),n.stopPropagation()})),document.getElementById("toc-collapse-all").addEventListener("click",(function(n){t(0),n.stopPropagation()}))}else o.innerHTML='<li style="opacity:0.7;font-style:italic;">Empty chat</li>'}function e(){const n=document.querySelector("main")||null,t=document.querySelector("main#main")||document.querySelector(".chat-container")||null,e=n||t;e!==r&&(r=e,d&&(d.disconnect(),d=null),r&&(d=new MutationObserver((function(){p||(p=1,u=setTimeout((function(){o(),p=0}),300))})),d.observe(r,{childList:1,subtree:1}),o()))}if(document.getElementById("toc-panel")||document.getElementById("toc-handle"))return;const l=document.createElement("style");l.textContent='\n/*Panel*/\n #toc-panel{\n position:fixed;\n top:0;\n right:0;\n width:280px;\n height:100%;\n background:#fafafa;\n box-shadow:-4px 0 8px rgba(0,0,0,0.1);\n font-family:sans-serif;\n font-size:0.8rem;\n border-left:1px solid #ddd;\n display:flex;\n flex-direction:column;\n z-index:9998;\n transform:translateX(0);\n transition:transform 0.3s ease;\n}\n #toc-panel.collapsed{\n transform:translateX(280px);\n}\n\n/*Panel Header*/\n #toc-header{\n padding:6px 10px;\n background:#ddd;\n border-bottom:1px solid #ccc;\n font-weight:bold;\n flex-shrink:0;\n display:flex;\n justify-content:space-between;\n align-items:center;\n}\n \n #toc-header-text{\n flex:1;\n}\n \n #toc-expand-all,#toc-collapse-all{\n cursor:pointer;\n padding:0 4px;\n font-size:0.8rem;\n opacity:0.8;\n display:flex;\n align-items:center;\n justify-content:center;\n}\n \n #toc-expand-all:hover,#toc-collapse-all:hover{\n opacity:1;\n}\n \n .toc-icon{\n width:14px;\n height:14px;\n display:inline-block;\n}\n\n/*TOC Items*/\n #toc-list{\n list-style:none;\n flex:1;\n overflow-y:auto;\n margin:0;\n padding:6px;\n}\n #toc-list li{\n padding:4px;\n cursor:pointer;\n border-radius:3px;\n transition:background-color 0.2s;\n white-space:nowrap;\n overflow:hidden;\n text-overflow:ellipsis;\n max-width:100%;\n}\n #toc-list li:hover{\n background:#f0f0f0;\n}\n #toc-list ul{\n margin-left:16px;\n padding:0;\n width:100%;\n}\n #toc-list ul li::before{\n content:"";\n}\n #toc-list ul ul li{\n font-size:0.75rem;\n color:#555;\n}\n \n/*Collapsible items*/\n .toc-toggle{\n display:inline-flex;\n align-items:center;\n justify-content:center;\n width:14px;\n height:14px;\n margin-right:4px;\n cursor:pointer;\n transition:transform 0.2s;\n flex-shrink:0;\n}\n \n .toc-item-content{\n display:inline-block;\n max-width:calc(100%-18px);\n overflow:hidden;\n text-overflow:ellipsis;\n vertical-align:bottom;\n pointer-events:none;\n}\n \n .toc-collapse-trigger{\n cursor:pointer;\n user-select:none;\n flex-direction:row;\n align-items:flex-start;\n}\n \n .toc-collapsed>ul{\n display:none;\n}\n \n .toc-clickable-content{\n flex:1;\n cursor:pointer;\n overflow:hidden;\n text-overflow:ellipsis;\n padding-left:2px;\n}\n\n/*Always-visible handle*/\n #toc-handle{\n position:fixed;\n top:50%;\n right:0;\n transform:translateY(-50%);\n width:30px;\n height:80px;\n background:#ccc;\n display:flex;\n align-items:center;\n justify-content:center;\n writing-mode:vertical-rl;\n text-orientation:mixed;\n cursor:pointer;\n font-weight:bold;\n user-select:none;\n z-index:9999;\n transition:background 0.2s;\n}\n #toc-handle:hover{\n background:#bbb;\n}\n\n/*Highlighting headings in the chat*/\n @keyframes highlightFade{\n 0%{background-color:#fffa99}\n 100%{background-color:transparent}\n}\n .toc-highlight{\n animation:highlightFade 1.5s forwards;\n}\n\n/*------Dark Mode Support------*/\n @media(prefers-color-scheme:dark){\n #toc-panel{\n background:#333;\n border-left:1px solid #555;\n box-shadow:-4px 0 8px rgba(0,0,0,0.7);\n}\n #toc-header{\n background:#555;\n border-bottom:1px solid #666;\n color:#eee;\n}\n #toc-list li:hover{\n background:#444;\n}\n #toc-list{\n color:#eee;\n}\n #toc-list ul ul li{\n color:#aaa;\n}\n #toc-handle{\n background:#555;\n color:#ddd;\n}\n #toc-handle:hover{\n background:#666;\n}\n}\n ',document.head.appendChild(l);const c='<svg xmlns="http://www.w3.org/2000/svg" class="toc-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',i='<svg xmlns="http://www.w3.org/2000/svg" class="toc-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>',s=document.createElement("div");s.id="toc-panel",s.innerHTML=`\n<div id="toc-header">\n<span id="toc-header-text">Conversation TOC</span>\n<span id="toc-expand-all" title="Expand All">${c}</span>\n<span id="toc-collapse-all" title="Collapse All">${i}</span>\n</div>\n<ul id="toc-list"></ul>\n `,document.body.appendChild(s);const a=document.createElement("div");a.id="toc-handle",a.textContent="TOC",document.body.appendChild(a);let r=null,d=null,p=0,u=null;e(),setInterval(e,2e3),a.addEventListener("click",(function(){s.classList.toggle("collapsed")}))}();